# FTP-Map MakeFile  

CC=cc
CFLAGS=-s -Wall

# Handle the install/Uninstall stuff
BIN=$(wildcard src/*.c)
HEADERS=$(wildcard src/*.h)
PREFIX="/usr/local"
BINDIR="/bin/"


all:
	$(CC) $(CFLAGS) $(BIN) $(HEADERS) -o $(BIN:.c=)
	@echo ":: [ok]"
install: all
	@mkdir -p ${PREFIX}${BINDIR}
	@mkdir -p ${PREFIX}/share
	@mkdir -p ${PREFIX}/share/ftpmap/
	@install -Dm775 $(BIN:.c=) ${PREFIX}${BINDIR}ftpmap
	@cp -a db ${PREFIX}/share/ftpmap/
	@cp -a tools ${PREFIX}/share/ftpmap/
	@echo ":: All done"

uninstall: 
	@rm -f ${PREFIX}${BINDIR}ftpmap
	@rm -r ${PREFIX}/share/ftpmap
	@echo ":: FTP-Map removed"

# Debug
debug: CFLAGS += -DDEBUG -ggdb
debug: all

clean:
	rm -f $(BIN:.c=)
	rm -f config.h
	rm -f Makefile
	rm *.log
	rm -f config.status	

.PHONY: all install uninstall clean

